<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Genopoisk - Orange Bold</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#fff;color:#333;display:flex;flex-direction:column;min-height:100vh;overflow-x:hidden}.container{max-width:1200px;margin:0 auto;padding:20px;flex:1}.header{text-align:center;padding:20px;background:#ff8c00;border-radius:15px;margin-bottom:20px;box-shadow:0 4px 15px rgba(255,140,0,.2)}.header h1{font-size:2rem;color:#fff}.search-box{margin:20px 0;display:flex;gap:10px}.search-input{flex:1;padding:12px;background:#fff;border:3px solid #ff8c00;border-radius:10px;color:#333;font-size:1rem}.search-btn{padding:12px 30px;background:#ff8c00;border:none;border-radius:10px;color:#fff;font-weight:bold;cursor:pointer;font-size:1rem}.search-btn:hover{background:#e67e00;box-shadow:0 4px 12px rgba(255,140,0,.3)}.categories{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin:20px 0}.category-card{background:#ff8c00;border-radius:12px;padding:25px;text-align:center;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px rgba(255,140,0,.2)}.category-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(255,140,0,.3);background:#e67e00}.category-icon{font-size:2.5rem;margin-bottom:10px;color:#fff}.category-title{font-size:0.95rem;color:#fff;font-weight:bold}.films-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;margin:20px 0}.film-card{background:#fff;border:3px solid #ff8c00;border-radius:12px;overflow:hidden;cursor:pointer;transition:all .3s;box-shadow:0 2px 8px rgba(255,140,0,.1)}.film-card:hover{border-color:#e67e00;transform:translateY(-5px);box-shadow:0 6px 20px rgba(255,140,0,.2)}.film-poster{width:100%;height:200px;object-fit:cover;background:#f0f0f0}.film-info{padding:12px}.film-title{font-size:0.85rem;color:#333;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-weight:600}.film-rating{font-size:0.85rem;color:#ff8c00;font-weight:bold}.random-preview{background:#fff;border:3px solid #ff8c00;border-radius:15px;padding:25px;margin:20px 0;box-shadow:0 6px 20px rgba(255,140,0,.15);display:flex;gap:20px;align-items:flex-start}.random-poster{width:150px;height:220px;border:3px solid #ff8c00;border-radius:10px;object-fit:cover;flex-shrink:0}.random-info{flex:1}.random-info h3{font-size:1.6rem;color:#333;margin-bottom:12px;font-weight:bold}.random-meta{color:#ff8c00;font-size:0.95rem;margin:10px 0;font-weight:600}.random-genres{color:#666;font-size:0.9rem;margin:12px 0}.watch-btn{background:#ff8c00;color:#fff;border:none;padding:12px 35px;border-radius:10px;font-weight:bold;cursor:pointer;margin-top:15px;font-size:1rem}.watch-btn:hover{background:#e67e00;box-shadow:0 4px 12px rgba(255,140,0,.3)}.loading{text-align:center;color:#ff8c00;display:none;margin:20px 0}.spinner{border:4px solid #f0f0f0;border-top:4px solid #ff8c00;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:20px auto}@keyframes spin{to{transform:rotate(360deg)}}.load-more{background:#ff8c00;color:#fff;border:none;padding:12px 35px;border-radius:10px;font-weight:bold;cursor:pointer;margin:20px auto;display:block;font-size:1rem}.load-more:hover{background:#e67e00;box-shadow:0 4px 12px rgba(255,140,0,.3)}@media (max-width:600px){.categories{grid-template-columns:repeat(2,1fr)}.films-grid{grid-template-columns:repeat(2,1fr)}.random-preview{flex-direction:column}}</style></head><body><div class="container"><div class="header"><h1>GENOPOISK</h1></div><div class="search-box"><input class="search-input" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤..."><button class="search-btn" onclick="searchFilms()">–ù–∞–π—Ç–∏</button></div><div class="categories"><div class="category-card" onclick="loadCategory('popular')"><div class="category-icon">üî•</div><div class="category-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</div></div><div class="category-card" onclick="loadCategory('top250')"><div class="category-icon">‚≠ê</div><div class="category-title">–¢–æ–ø 250</div></div><div class="category-card" onclick="loadCategory('new')"><div class="category-icon">üé¨</div><div class="category-title">–ù–æ–≤–∏–Ω–∫–∏</div></div><div class="category-card" onclick="loadCategory('random')"><div class="category-icon">üéØ</div><div class="category-title">–°–ª—É—á–∞–π–Ω—ã–π</div></div></div><div id="loading" class="loading"><div class="spinner"></div><p>–ó–∞–≥—Ä—É–∂–∫–∞...</p></div><div id="randomPreview"></div><div id="filmsGrid" class="films-grid"></div><button id="loadMoreBtn" class="load-more" onclick="loadMoreFilms()" style="display:none">–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ</button></div><script>const API_KEY='33b1e3bd-2643-4ac1-8eb4-6b7392c5e913';const API_BASE='https://kinopoiskapiunofficial.tech/api';let currentPage=1;let currentCategory=null;let isLoading=false;async function apiGet(url){try{const res=await fetch(url,{headers:{'X-API-KEY':API_KEY}});if(!res.ok)throw new Error(`HTTP ${res.status}`);return res.json();}catch(e){console.error('API Error:',e);throw e;}}async function loadCategory(category){currentCategory=category;currentPage=1;document.getElementById('filmsGrid').innerHTML='';document.getElementById('randomPreview').innerHTML='';if(category==='random'){loadRandomFilm();}else{loadMoreFilms();}}async function loadRandomFilm(){try{const randomPage=Math.floor(Math.random()*2)+1;const url=`${API_BASE}/v2.2/films/top?type=TOP_250_BEST_FILMS&page=${randomPage}`;const data=await apiGet(url);const films=data.items||data.films||[];if(films.length>0){const film=films[Math.floor(Math.random()*films.length)];displayRandomFilm(film);}}catch(e){console.error(e);alert('–û—à–∏–±–∫–∞: '+e.message);}}function displayRandomFilm(film){const filmId=film.filmId||film.kinopoiskId;const title=film.nameRu||film.nameEn||'–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';const year=film.year||'‚Äî';const rating=film.rating||film.ratingKinopoisk||'‚Äî';const genres=(film.genres||[]).map(g=>typeof g==='object'?g.genre:g).join(', ')||'‚Äî';const poster=film.posterUrlPreview||film.posterUrl||'';const preview=document.getElementById('randomPreview');preview.innerHTML=`<div class="random-preview"><img src="${poster}" class="random-poster" onerror="this.style.display='none'"><div class="random-info"><h3>${title}</h3><div class="random-meta">üìÖ ${year}</div><div class="random-meta">‚≠ê –†–µ–π—Ç–∏–Ω–≥: ${rating}</div><div class="random-genres">üé≠${genres}</div><button class="watch-btn" onclick="playFilm(${filmId},'${title.replace(/'/g,"\\'")}')">–°–º–æ—Ç—Ä–µ—Ç—å</button></div></div>`;preview.style.animation='fadeIn .3s';}async function loadMoreFilms(){if(isLoading)return;isLoading=true;document.getElementById('loading').style.display='block';document.getElementById('loadMoreBtn').style.display='none';try{let url='';if(currentCategory==='popular'){url=`${API_BASE}/v2.2/films/top?type=TOP_100_POPULAR_FILMS&page=${currentPage}`;}else if(currentCategory==='top250'){url=`${API_BASE}/v2.2/films/top?type=TOP_250_BEST_FILMS&page=${currentPage}`;}else if(currentCategory==='new'){url=`${API_BASE}/v2.2/films?order=NUM_VOTE&type=FILM&ratingFrom=0&ratingTo=10&yearFrom=2024&yearTo=2025&page=${currentPage}`;}const data=await apiGet(url);const films=data.items||data.films||[];if(films.length>0){displayFilms(films);currentPage++;document.getElementById('loadMoreBtn').style.display='block';}else{document.getElementById('loadMoreBtn').style.display='none';}}catch(e){console.error(e);if(currentPage===1){alert('–û—à–∏–±–∫–∞: '+e.message);}}finally{isLoading=false;document.getElementById('loading').style.display='none';}}function displayFilms(films){const container=document.getElementById('filmsGrid');films.forEach(film=>{const filmId=film.filmId||film.kinopoiskId;const title=film.nameRu||film.nameEn||'–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';const year=film.year||'‚Äî';const rating=film.rating||film.ratingKinopoisk||'‚Äî';const poster=film.posterUrlPreview||film.posterUrl||'';const card=document.createElement('div');card.className='film-card';card.innerHTML=`<img src="${poster}" class="film-poster" onerror="this.style.display='none'"><div class="film-info"><div class="film-title">${title}</div><div class="film-rating">‚≠ê ${rating}</div></div>`;card.onclick=()=>playFilm(filmId,title);container.appendChild(card);});}function playFilm(filmId,title){filmId=String(filmId).trim();if(!filmId||!filmId.match(/^\d+$/)){alert('–û—à–∏–±–∫–∞ ID');return;}const url=`https://api.embess.ws/embed/kp/${filmId}`;window.open(url,'player','width=1000,height=700');}</script></body></html>
